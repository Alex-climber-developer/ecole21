COMPILER=gcc
OPTIONS=-Wall -Wextra -Werror
COMPILE=$(COMPILER) $(OPTIONS)
TEST_FLAGS = -lcheck
GCOV_FLAGS  = --coverage -lcheck
UNAME = $(shell uname)
ifeq ($(UNAME), Linux)
	TEST_FLAGS += -lm -lsubunit
	GCOV_FLAGS += -lrt -lsubunit -lpthread
endif

all: s21_math.a test
s21_math.a:
	$(COMPILE) -c s21_math.c
	@ar rc s21_math.a s21_math.o
	@ranlib s21_math.a
	@rm -f *.o

check:
	clang-format -style=Google -i *.h
	clang-format -style=Google -n *.h
	clang-format -style=Google -i *.c
	clang-format -style=Google -n *.c

# clean: rm -rf *.o *.gcno *.gcda *.a *.info gcov report Tests/test

test:
	@$(COMPILE) Tests/s21_unit_peer_1.c s21_math.c $(TEST_FLAGS) -o Tests/test
	@./Tests/test

# gcov_report: